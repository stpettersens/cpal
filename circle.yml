machine:
  ruby:
    version: 2.4

dependencies:
  pre:
    - curl https://sh.rustup.rs -sSf | sh
    - git clone https://github.com/stpettersens/netsh.gi
    - rustc --version
    - cargo --version
    - ruby --version
    - rake --version

compile:
  override:
    - cd netsh
    - cargo build --release
    - cp target/release/netsh /usr/bin/_netsh
    - cd ..
    - gem install os
    - rake
    - rake -f ci_rakefile.rb data
    - rake test
